---
title: "Leaflet+Plotlyã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹"
emoji: "ğŸ˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["leaflet", "plotly", "javascript"]
published: false
---

# ã¯ã˜ã‚ã«
ã“ã®è¨˜äº‹ã§ã¯ã€Leafletã¨Plotlyã‚’ä½¿ã£ã¦ã€åœ°å›³ä¸Šã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚æƒ³å®šã—ã¦ã„ã‚‹çŠ¶æ³ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

- GitHub Pagesã§ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
    ```
    main
    â”œâ”€â”€ index.html
    â”œâ”€â”€ src
    â”‚   â”œâ”€â”€ plotly_graph.html
    ```
- `index.html`ã§åœ°å›³ã‚’è¡¨ç¤ºã—ã€åœ°å›³ä¸Šã®ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§`plotly_graph.html`å†…ã®ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹
- `plotly_graph.html`ã¯ã€pythonã®`plotly`ã§ä½œæˆã—ãŸã‚°ãƒ©ãƒ•ã‚’htmlãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ãŸã‚‚ã®
    - è»½é‡åŒ–ã®ãŸã‚ã«å‡ºåŠ›æ™‚ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®š
        ```python
        # ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
        ## x_data, y_dataã®np.float16ã¸ã®å‹å¤‰æ›
        ## å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã€htmlãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚ºã‚’è»½æ¸›
        x_data = x_data.astype(np.float16)
        y_data = y_data.astype(np.float16)

        # ã‚°ãƒ©ãƒ•ã®ä½œæˆ
        fig = px.line(x=x_data, y=y_data)

        # htmlãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å‡ºåŠ›
        ## full_html=Falseã§htmlãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚ºã‚’è»½æ¸›
        ## include_plotlyjs='cdn'ã§ã€plotly.jsã‚’CDNã‹ã‚‰èª­ã¿è¾¼ã‚€
        fig.write_html("plotly_graph.html", include_plotlyjs='cdn', full_html=False)
        ```

# index.htmlã¨plotly_graph.htmlã®ä½œæˆ
ã¾ãšã¯ã€`index.html`ã¨`plotly_graph.html`ã‚’ä½œæˆã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

```html
<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Leaflet+Plotly</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([35.681236, 139.767125], 15);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        var marker = L.marker([35.681236, 139.767125]).addTo(map);
        marker.bindPopup('<iframe src="src/plotly_graph.html" width="400" height="300"></iframe>');
    </script>
</body>
</html>
```

```html
<!-- plotly_graph.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Plotly Graph</title>
    <meta charset="utf-8" />
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div id="plotly_graph"></div>
    <script>
        var x_data = [1, 2, 3, 4, 5];
        var y_data = [10, 20, 30, 40, 50];
        var data = [{
            x: x_data,
            y: y_data,
            type: 'scatter'
        }];
        Plotly.newPlot('plotly_graph', data);
    </script>
</body>
</html>
```


